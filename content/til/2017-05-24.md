+++
date = "2017-05-24T00:00:00"
title = "#TIL 2017-05-24 : til, sysadmin, docker"
description = "I learned in 2017-05-24 about Changing channel from alpha to stable will remove ALL DATA; Reducing docker image the right way"
categories = ["Today I learned", "docker"]
tags = ["til", "sysadmin", "docker"]
+++


# DOCKER

## Changing channel from alpha to stable will remove ALL DATA

On MacOS, changing Docker channel will remove all data (includes volumes, images, networks and ... everything).

Because Docker on Mac using a minimal Linux machine to host docker engine, so changing machine means discarding all old data. So BECAREFUL !

# DOCKER

## Reducing docker image the right way

When building an image, Docker engine commit file system layer on every command (RUN, ADD, COPY). So next time you installing packages from package manager likes apt, yum, pacman, ...remember clean their cache in same line.

**BAD WAY**

```
RUN apt-get update
RUN apt-get install git

# Something here

# End of file
RUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
```

**RIGHT WAY**

```
RUN apt-get update && apt-get install -y git zip unzip && apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
```
