+++
date = "2017-05-18T00:00:00"
title = "What I learned in 2017-05-18"
description = "I learned in 2017-05-18 about sysadmin, web, linux, til, error, cloudflare"
categories = ["Today I learned", "sysadmin", "web"]
tags = ["sysadmin", "web", "linux", "til", "error", "cloudflare"]
+++


# SYSADMIN

## Grant user to use sudo without password

This is bad practice but it's kind of hacky thing if you YOLO

```bash
# Create a user with home dir and bash shell (if you don't have yet)
$ useradd -m YOURUSERNAME -s /bin/bash
$ sudo vi /etc/sudoers
```

Add this line below `root    ALL=(ALL:ALL) ALL` (**User privilege specification** section)

```bash
$ YOUR_USERNAME     ALL=(ALL:ALL) NOPASSWD:ALL
```

Then press `:wq!` to force saving the file

![make me a sandwich sudo](https://imgs.xkcd.com/comics/sandwich.png)

Enjoy sudo !

# WEB

## Cloudflare Error 522 Connection Time out

If you are using Cloudflare as a proxied web server, it will provide many benefits about performance (assets caching, prevent DDOS and cheap CDN). But sometimes, you will face to this error "522 Connection Time out".

The problems caused by :

- Networking (CF can't touch origin server : Firewall blocking, Network Layer #1,#2,#3 issue)
- Timeout (origin server process too long than 90 seconds)
- Empty or invalid response from origin server
- No or big HTTP headers (> 8Kb)
- Failed TCP handshake

**Ref:**

- https://support.cloudflare.com/hc/en-us/articles/200171906-Error-522-Connection-timed-out
- https://support.cloudflare.com/hc/en-us/articles/200171936-Error-520-Web-server-is-returning-an-unknown-error
