+++
date = "2017-02-23T00:00:00"
title = "What I learned in 2017-02-23"
description = "I learned in 2017-02-23 about database, mysql, quote, testing, til, phpunit, english, php, mistake"
categories = ["Today I learned", "quote", "php", "mysql"]
tags = ["database", "mysql", "quote", "testing", "til", "phpunit", "english", "php", "mistake"]
+++


# QUOTE

## Random quote 23 Feb 2017

> A computer lets you make more mistakes faster than any other invention in human history, with the possible exceptions of handguns and tequila. - Mitch Ratcliffe

Haha, it's totally true ! And it makes me remember this meme when I was little bit drunk !

![Tequila](https://cloud.githubusercontent.com/assets/4528223/23245595/4094b488-f9c0-11e6-875f-8727e253964d.jpg)

# PHP

## Using VarDumper in PHPUnit

The trick is writing the output to STDERR stream, I wrote a helper function below

```php
function phpunit_dump() {
    $cloner = new \Symfony\Component\VarDumper\Cloner\VarCloner();
    $dumper = new \Symfony\Component\VarDumper\Dumper\CliDumper(STDERR);
    foreach (func_get_args() as $var) {
        $dumper->dump($cloner->cloneVar($var));
    }
}
```

How to use it ?

```php
// Something magic here :D

phpunit_dump($magic_var1, $magic_var2, $magic_of_magic);

// So much magic below, can't understand anymore
```

![Magic](https://i.giphy.com/12NUbkX6p4xOO4.gif)

# MYSQL

## UNION vs UNION ALL

The difference is UNION command will sort and remove duplicated rows (RETURNED ONLY DISTINCT ROWS)

Examples :

```sql
mysql> select '1', '2' union select '2', '1' union select '3', '4' union select '1', '2';
+---+---+
| 1 | 2 |
+---+---+
| 1 | 2 |
| 2 | 1 |
| 3 | 4 |
+---+---+
3 rows in set (0.00 sec)

mysql> select '1', '2' union select '2', '1' union select '3', '4' union select '1', '3';
+---+---+
| 1 | 2 |
+---+---+
| 1 | 2 |
| 2 | 1 |
| 3 | 4 |
| 1 | 3 |
+---+---+
4 rows in set (0.00 sec)

mysql> select '1', '2' union all select '2', '1' union all select '3', '4' union all select '1', '2';
+---+---+
| 1 | 2 |
+---+---+
| 1 | 2 |
| 2 | 1 |
| 3 | 4 |
| 1 | 2 |
+---+---+
4 rows in set (0.00 sec)
```

**Tips**

In case there will be no duplicates, using UNION ALL will tell the server to skip that (useless, expensive) step.
