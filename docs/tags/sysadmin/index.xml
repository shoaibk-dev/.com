<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sysadmin on KhanhIceTea B(rain)-log</title>
    <link>https://khanhicetea.com/tags/sysadmin/</link>
    <description>Recent content in Sysadmin on KhanhIceTea B(rain)-log</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 24 Nov 2017 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://khanhicetea.com/tags/sysadmin/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>#TIL 2017-11-24 : til, sysadmin, dns, ip</title>
      <link>https://khanhicetea.com/til/2017-11-24/</link>
      <pubDate>Fri, 24 Nov 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-11-24/</guid>
      <description>SYSADMIN Getting your external IP We can get our external IP address by following ways :
 Call http request : curl http://wtfismyip.com/text or curl http://ifconfig.me/ip Lookup A record for hostname nslookup myip.opendns.com resolver1.opendns.com (this only works when you use resolver of OpenDNS)  Bonus : curl https://v6.ident.me/ for IPv6</description>
    </item>
    
    <item>
      <title>Getting AWS, GCP and Azure IP ranges</title>
      <link>https://khanhicetea.com/post/aws-gcp-azure-ip-ranges/</link>
      <pubDate>Mon, 13 Nov 2017 16:31:08 +0700</pubDate>
      
      <guid>https://khanhicetea.com/post/aws-gcp-azure-ip-ranges/</guid>
      <description>TL;DR This is my gist of result
https://gist.github.com/khanhicetea/c6cc74b99ab336d58c2da7929c2de709
Introdution These are 3 biggest cloud providers (from Amazon, Google and Microsoft). This is the way to get their IP ranges (IPv4).
Amazon Web Service AWS update its IP ranges on this link : https://ip-ranges.amazonaws.com/ip-ranges.json
# download ip-ranges.json file curl -o aws.json https://ip-ranges.amazonaws.com/ip-ranges.json # parse ip range with grep tool grep -o -E &#39;\d+\.\d+\.\d+\.\d+/\d+&#39; aws.json &amp;gt; aws.txt  The result are in aws.</description>
    </item>
    
    <item>
      <title>#TIL 2017-10-07 : til, sysadmin, tool, networking</title>
      <link>https://khanhicetea.com/til/2017-10-07/</link>
      <pubDate>Sat, 07 Oct 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-10-07/</guid>
      <description>SYSADMIN Using netcat as tiny TCP debug tool You can use netcat or nc as a debugging TCP tool. It can be a TCP sender and receiver with a short session (auto close when connection is closed)
Examples :
Scan ports
$ nc -zv 127.0.0.1 20-80  Check redis status
$ echo &#39;info&#39; | nc 127.0.0.1 6379  Retrieve http response
$ printf &amp;quot;GET /xinchao HTTP/1.1\r\n\r\n&amp;quot; | nc 127.0.0.1 8000 | tee xinchao.</description>
    </item>
    
    <item>
      <title>#TIL 2017-10-04 : sysadmin, networking, smtp, til, time, mail, cpu</title>
      <link>https://khanhicetea.com/til/2017-10-04/</link>
      <pubDate>Wed, 04 Oct 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-10-04/</guid>
      <description>NETWORKING How SMTP works When a email send through an SMTP (with authentication), every SMTP server is a hop in mail routing. So it will transfer to localmail or forward the email to next hop (shortest distance via DNS MX record).
And standard port of SMTP is 25 (unsecured, but can upgrade to TLS via STARTTLS command).
$ nslookup -type=mx gmail.com 8.8.8.8 Server: 8.8.8.8 Address: 8.8.8.8#53 Non-authoritative answer: gmail.com mail exchanger = 20 alt2.</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-27 : sysadmin, shell, linux, til, keyboard, bash</title>
      <link>https://khanhicetea.com/til/2017-09-27/</link>
      <pubDate>Wed, 27 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-27/</guid>
      <description>LINUX Send ENTER key to kernel When you try to send an Enter keyboard to linux kernel, it looks like nothing happens.
This is because you only send a key press (KEY DOWN) but don&amp;rsquo;t send an key release (KEY UP) event after that.
SYSADMIN BASH tracing commands Thank Hiro Ishii for teaching me this
set -x will print all running commands in your bash script
So I dove in and look for all set options of BASH.</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-26 : til, sysadmin, shell, bash</title>
      <link>https://khanhicetea.com/til/2017-09-26/</link>
      <pubDate>Tue, 26 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-26/</guid>
      <description>SYSADMIN BASH exiting on first error Setting a flag set -e to bash script will let the script exit on first error occurs, so if you want to ignore a command just adding || true to suffix
set -e errorCmd $1 || true echo &amp;quot;Run here !&amp;quot;  And opposite of set -e is set +e, haha of course !
set +e errorCmd $1 echo &amp;quot;Still run here !&amp;quot;  SYSADMIN BASH return a value in function Creating function is a good way to refactor your bash script.</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-25 : sysadmin, networking, zip, firewall, compress, til, tools</title>
      <link>https://khanhicetea.com/til/2017-09-25/</link>
      <pubDate>Mon, 25 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-25/</guid>
      <description>SYSADMIN Blocking specified country to prevent from DDOS Last day I checked system logs and got a lot of warning messages mentioned that my server has been attack via Brute-force. So I decided to blocked some countries from connecting to attacked ports (21, 25). They are China, Russia and US.
This site provides a list of IP blocks of specified country
http://www.ipdeny.com/ipblocks/
TOOLS Zip compressing list of files To specify a list of compressed files when using zip cli tool, you could use -@ [file_list] flag.</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-07 : til, sysadmin, networking</title>
      <link>https://khanhicetea.com/til/2017-09-07/</link>
      <pubDate>Thu, 07 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-07/</guid>
      <description>NETWORKING TCP FIN timeout The TCP FIN timeout belays the amount of time a port must be inactive before it can reused for another connection. The default is often 60 seconds, but can normally be safely reduced to 30 or even 15 seconds:
net.ipv4.tcp_fin_timeout = 15  Ref : https://www.linode.com/docs/web-servers/nginx/configure-nginx-for-optimized-performance
SYSADMIN Generate dhparam file faster openssl uses strong prime (which is useless for security but requires an awful lot more computational effort.</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-05 : til, sysadmin, ansible, grep</title>
      <link>https://khanhicetea.com/til/2017-09-05/</link>
      <pubDate>Tue, 05 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-05/</guid>
      <description>SYSADMIN Ansible playbook : skip to task You can skip to a task by its name by adding parameter --start-at
$ ansible-playbook playbook.yml --start-at=&amp;quot;[your task name]&amp;quot;  SYSADMIN Grep : find a string in folder Grep is a greate tool for searching a string in files.
Syntax
$ grep -nr &#39;[string]&#39; [folder]  If you want to show surrounding lines the result, add flag -C [number] to the command</description>
    </item>
    
    <item>
      <title>#TIL 2017-09-01 : sysadmin, cli, web, til, ssh, mysql, security, proxy</title>
      <link>https://khanhicetea.com/til/2017-09-01/</link>
      <pubDate>Fri, 01 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-09-01/</guid>
      <description>MYSQL Mycli : a new good cli MySql Client This tool is written in Python with super cool features (auto-complete and colors).
Worth a shot !
Install
$ pip install mycli  Usage
$ mycli -h 127.0.0.1 -P 3306 -u root  Screencast
SYSADMIN Create SSH tunnel manually SSH Tunnel is a fast way to transfer traffic through unsafe internet today. It would be used in MySQL connect, FTP connect or HTTP connect, &amp;hellip;</description>
    </item>
    
    <item>
      <title>#TIL 2017-08-06 : sysadmin, java, kernel, til, linux, security, php, mistake</title>
      <link>https://khanhicetea.com/til/2017-08-06/</link>
      <pubDate>Sun, 06 Aug 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-08-06/</guid>
      <description>JAVA Runing old java applets on brower Mostly morden browser has stop support Java plugins, so you can&amp;rsquo;t run Java applet on browser.
Temporary way : - run in IE or Safari - run in an old Firefox (version 23)
And what if old java applet can&amp;rsquo;t be runned on Java 8 because of weak signature algorithm. Try this
 Open java.security file :  In MacOS, located in /Library/Java/JavaVirtualMachines/jdk[jdk-version].</description>
    </item>
    
    <item>
      <title>#TIL 2017-06-15 : til, sysadmin, gearman, queue</title>
      <link>https://khanhicetea.com/til/2017-06-15/</link>
      <pubDate>Thu, 15 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-06-15/</guid>
      <description>SYSADMIN Gearman bash worker and client Gearman is a awesome job queue service that helps you scale your system. In smaller context, it can help us to run a background woker for minor tasks like backup data, cleaning system.
Install :
$ sudo apt install gearman-job-server gearman-tools  Create a worker bash script
worker.sh
#!/bin/bash echo $1 echo $2  Run worker, -w means run as worker mode , -f test means function name will be test</description>
    </item>
    
    <item>
      <title>#TIL 2017-06-13 : til, sysadmin, git, dev</title>
      <link>https://khanhicetea.com/til/2017-06-13/</link>
      <pubDate>Tue, 13 Jun 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-06-13/</guid>
      <description>GIT Resolving conflict like a boss When using git merge new branch to old branch, you just want use all ours or theirs version but be lazy to update every conflicted file.
grep -lr &#39;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&#39; . | xargs git checkout --ours  Or
grep -lr &#39;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&#39; . | xargs git checkout --theirs  Explain : these commands will find any file contains &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; string (conflicted file) and run git checkout --[side]</description>
    </item>
    
    <item>
      <title>#TIL 2017-05-24 : til, sysadmin, docker</title>
      <link>https://khanhicetea.com/til/2017-05-24/</link>
      <pubDate>Wed, 24 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-05-24/</guid>
      <description>DOCKER Changing channel from alpha to stable will remove ALL DATA On MacOS, changing Docker channel will remove all data (includes volumes, images, networks and &amp;hellip; everything).
Because Docker on Mac using a minimal Linux machine to host docker engine, so changing machine means discarding all old data. So BECAREFUL !
DOCKER Reducing docker image the right way When building an image, Docker engine commit file system layer on every command (RUN, ADD, COPY).</description>
    </item>
    
    <item>
      <title>#TIL 2017-05-22 : sysadmin, shell, util, tool, compressing, til, bash</title>
      <link>https://khanhicetea.com/til/2017-05-22/</link>
      <pubDate>Mon, 22 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-05-22/</guid>
      <description>SYSADMIN Using BSD find util to find and exec command on file and folder Simple syntax of find
$ find [find_path] -type [file_type] -exec [command] {} \;  Add filename matching pattern to filter the result
$ find [find_path] -name &amp;quot;*.php&amp;quot; -type [file_type] -exec [command] {} \;  Where file_type is :
 b : block special c : character special d : directory f : regular file l : symbolic link p : FIFO s : socket  Examples:</description>
    </item>
    
    <item>
      <title>#TIL 2017-05-19 : sysadmin, shell, testing, devops, til, automated, bash</title>
      <link>https://khanhicetea.com/til/2017-05-19/</link>
      <pubDate>Fri, 19 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-05-19/</guid>
      <description>DEVOPS Checking forced push conflicts on source code in auto testing Using automated CI solution likes Travis, Jenkins, DroneCI, &amp;hellip; is good solution to ensure quality of software and no breaks in deployment.
Sometimes, developers force push conflicts part to production branch of source code. If the CI tests only backend (python, ruby, php, go, ..) and forget about frontend code, then your application will be exploded !
So checking the conflicts code is required step before testing backend and deployment.</description>
    </item>
    
    <item>
      <title>#TIL 2017-05-18 : sysadmin, web, linux, til, error, cloudflare</title>
      <link>https://khanhicetea.com/til/2017-05-18/</link>
      <pubDate>Thu, 18 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-05-18/</guid>
      <description>SYSADMIN Grant user to use sudo without password This is bad practice but it&amp;rsquo;s kind of hacky thing if you YOLO
# Create a user with home dir and bash shell (if you don&#39;t have yet) $ useradd -m YOURUSERNAME -s /bin/bash $ sudo vi /etc/sudoers  Add this line below root ALL=(ALL:ALL) ALL (User privilege specification section)
$ YOUR_USERNAME ALL=(ALL:ALL) NOPASSWD:ALL  Then press :wq! to force saving the file</description>
    </item>
    
    <item>
      <title>#TIL 2017-05-17 : til, sysadmin, compressing, rar, mysql</title>
      <link>https://khanhicetea.com/til/2017-05-17/</link>
      <pubDate>Wed, 17 May 2017 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2017-05-17/</guid>
      <description>MYSQL Mysql dumping only table structure Adding -D to dump only data structure
Example :
$ mysqldump -h 127.0.0.1 -u root -p&amp;quot;something&amp;quot; -D database1 &amp;gt; db.sql  SYSADMIN Compressing and Extracting files with rar in Linux zip and tar disadvantages All unicode filename will be transform to weird character, so it makes broken paths and broken links
Notice rar and unrar in Linux isn&amp;rsquo;t same version and so don&amp;rsquo;t use unrar to extract archived file by rar (It causes invalid full paths)</description>
    </item>
    
    <item>
      <title>#TIL 2016-03-26 : sysadmin, shell, command-line, shortcuts, til, bash</title>
      <link>https://khanhicetea.com/til/2016-03-26/</link>
      <pubDate>Sat, 26 Mar 2016 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2016-03-26/</guid>
      <description>SYSADMIN Bash shell shortcuts  Ctrl + e : jump cursor to EOL Ctrl + a : jump cursor to BOL (beginning of line) Ctrl + u : delete all from cursor to BOL Ctrl + k : delete all from cursor to EOL Ctrl + r : search history, press again for next search Ctrl + l : clear shell screen Ctrl + c : terminate the command (sometimes have to press twice) Ctrl + z : suspend the command, back to shell.</description>
    </item>
    
    <item>
      <title>#TIL 2015-12-30 : til, sysadmin, command-line, bash</title>
      <link>https://khanhicetea.com/til/2015-12-30/</link>
      <pubDate>Wed, 30 Dec 2015 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2015-12-30/</guid>
      <description> SYSADMIN Commands Command lsof List all opened files, sockets, pipes
Eg:
 List processes are using port 80 (need root if port between 1-1023)  # sudo lsof -i:80   List processes are using /bin/bash  # lsof /bin/bash  </description>
    </item>
    
    <item>
      <title>#TIL 2015-12-04 : sysadmin, websocket, log, python, clone, ref-var, til, cli-server, docker, php</title>
      <link>https://khanhicetea.com/til/2015-12-04/</link>
      <pubDate>Fri, 04 Dec 2015 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2015-12-04/</guid>
      <description>PHP Run built-in server via Docker Docker is the fast and clean way to run Linux programs.
We can run a PHP project via PHP built-in server and Docker.
docker run -it -p 8080:8080 -v `pwd`:/code php:7 php -S 0.0.0.0:8080 -t /code/web /code/web/server.php  With server.php content is
&amp;lt;?php $filename = __DIR__.preg_replace(&#39;#(\?.*)$#&#39;, &#39;&#39;, $_SERVER[&#39;REQUEST_URI&#39;]); if (php_sapi_name() === &#39;cli-server&#39; &amp;amp;&amp;amp; is_file($filename)) { return false; } // Run application below $app = new Application(); $app-&amp;gt;run();  PYTHON Reference assign object variable When you have a object x and assign y = x, y will be a ref of x (it looks like pointer of C).</description>
    </item>
    
    <item>
      <title>#TIL 2015-12-03 : til, sysadmin, curl, ftp</title>
      <link>https://khanhicetea.com/til/2015-12-03/</link>
      <pubDate>Thu, 03 Dec 2015 00:00:00 +0000</pubDate>
      
      <guid>https://khanhicetea.com/til/2015-12-03/</guid>
      <description> SYSADMIN FTP via curl tool Can upload an file via FTP by curl tool with handy script :
curl -T file_need_to_upload ftp://hostname --user user:passwd  </description>
    </item>
    
  </channel>
</rss>